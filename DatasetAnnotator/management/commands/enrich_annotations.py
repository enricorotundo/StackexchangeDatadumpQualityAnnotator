# -*- coding: utf-8 -*-

"""
This script retrieves the 
"""

from django.core.management.base import BaseCommand, CommandError
from django.db.models import Q
from ...models import *
import csv, datetime
from django.db.models import Q


post_ids = [  269,   304,   434,  1044,  1069,  1153,  1327,  1338,  1440,
        1454,  1505,  1544,  2055,  2056,  2062,  2063,  2116,  2154,
        2966,  2984,  3009,  3380,  3759,  3783,  4126,  4128,  4277,
        4336,  4365,  4385,  4573,  4574,  4772,  4774,  4891,  5113,
        5124,  5128,  5252,  5757,  6653,  7140,  7141,  7142,  7179,
        7492,  7494,  7794,  7796,  9004,  9007,  9519,  9522,  9525,
        9589,  9592,  9767,  9933, 10044, 10045, 10053, 10076, 10078,
       10081, 10148, 10149, 10251, 10259, 10262, 10461, 10462, 10578,
       10580, 10776, 10780, 11208, 11451, 11460, 13241, 13243, 13385,
       13497, 13508, 13533, 13536, 13785, 13896, 13914, 14049, 14050,
       14058, 14683, 14689, 14700, 14891, 16065, 16254, 16260, 16970,
       16972, 17238, 17244, 17246, 17272, 17278, 18647, 18649, 18652,
       18653, 18658, 18660, 18887, 18938, 18945, 18967, 19886, 20058,
       20389, 20397, 20556, 20741, 20742, 20743, 21285, 21300, 21335,
       21336, 21349, 21358, 21413, 21438, 21486, 21489, 21492, 22469,
       22470, 22472, 22687, 22688, 24220, 24225, 24227, 24242, 24551,
       24799, 26362, 26547, 26679, 31629, 33981, 33984, 33985, 34522,
       35428, 35436, 35836, 35860, 35928, 36511, 36737, 36739, 36792,
       36829, 37063, 37364, 37367, 37726, 38050, 38051, 38541, 39294,
       39317, 39835, 40097, 40101, 40104, 40111, 40112, 42216, 42621,
       42622, 42626, 42736, 43272, 43284, 43407, 43456, 43994, 43999,
       44016, 44652, 44671, 44675, 44715, 44925, 44926, 44934, 44939,
       44964, 44970, 44971, 44973, 44986, 44994, 44996, 45012, 45588,
       45591, 45787, 45794, 45859, 46237, 46241, 47877, 47878, 48349,
       48352, 49372, 49374, 49431, 49889, 50673, 51768, 51770, 51780,
       51842, 51857, 52348, 52352, 52473, 52476, 53807, 55447, 57303,
       57307, 57309, 58613, 58623, 59883, 59885, 59986, 59988, 60137,
       60144, 60159, 61108, 61522, 61526, 63782, 63788, 64099, 64128,
       64405, 65226, 65227, 65234, 65267, 65299, 66398, 66418, 67671,
       67672, 67682, 68165, 68171, 68554, 69316, 69318, 71792, 71964,
       71965, 72446, 72452, 72455, 72568, 73450, 73453, 74638, 74644,
       74651, 74805, 74806, 74807, 74809, 74833, 74852, 74868, 74896,
       76127, 76998, 76999, 77658, 77661, 77776, 77780]


class Command(BaseCommand):
    help = ''

    def handle(self, *args, **options):
        self.stdout.write('Exporting annotations')

        owneruserid_userid = Posts.objects.using('travel').all().filter(id__in=post_ids).values('owneruserid', 'id')

        keys = owneruserid_userid[0].keys()

        with open('Analysis/Data/travel/userid_postid.csv', 'wb') as csvfile:
            dict_writer = csv.DictWriter(csvfile, keys)
            dict_writer.writeheader()
            dict_writer.writerows(owneruserid_userid)